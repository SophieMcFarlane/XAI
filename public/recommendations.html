<!doctype html>

<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="author" content="Sophie McFarlane">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


        <title>Explainable AI-System A</title>

        <!-- Link to Bootstrap CSS-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <!-- Link to local stylesheet -->
        <link rel="stylesheet" href="./recommendations.css">
        <!-- Link to jQuery-->
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    </head>

    <body>
        <!--NavBar-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="#">Movie Recommender</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="./index.html">Rate Movies</a>
                </li>
              </ul>
              <span class="navbar-text">
                Movie Recommender with Explainable AI
              </span>
            </div>
          </nav>

        <!--Jumbotron Section-->
        <section class="jumbotron text-center" style="background-color: white;">
            <div class="container">
                <h1>Movie Recommender</h1>
                <p class="lead text-muted">
                    Hello and welcome to this Movie Recommender! Below you will find a list of movies that have been recommended just for you, we hope you enjoy.  
                </p>
                <p class="lead text-muted">Click the 'See Explanation' button to see why this movie was recommended to you</p>
            </div>

        </section>

        <!--Main Body-->
        <div class=" container bg-light py-5">
            <!--First Movie-->
            <div class="row featurette">
                <div class="col-md-7">
                    <h2 id=m1Title class="featurette-heading"></h2>
                    <p id=m1Runtime class="lead"></p>
                    <p id=m1Budget class="lead"></p>
                    <p id=m1Revenue class="lead"></p>
                    <p id=m1AvgVote class="lead"></p>
                    <p id=m1VoteCount class="lead"></p>
                </div>
                <div class="col-md-5">
                    <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 500x500">
                        <image  href="./images/image-placeholder-500x500.jpg"></image>
                    </svg>
                    <button id=m1btn class="btn btn-secondary btn-explanations-odd">See Explanation</button>
                </div>
            </div>
            <div id=m1Explanation class="explanation">
                Movie 1 Explanation goes here
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>

            <hr class="featurette-divider">

            <!--Second Movie-->
            <div class="row featurette">
                <div class="col-md-5">
                    <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 500x500">
                        <image  href="./images/image-placeholder-500x500.jpg"></image>
                    </svg>
                    <button id=m2btn class="btn btn-secondary btn-explanations-even">See Explanation</button>
                </div>
                <div class="col-md-7">
                    <h2 id=m2Title class="featurette-heading"></h2>
                    <p id=m2Runtime class="lead"></p>
                    <p id=m2Budget class="lead"></p>
                    <p id=m2Revenue class="lead"></p>
                    <p id=m2AvgVote class="lead"></p>
                    <p id=m2VoteCount class="lead"></p>
                </div>
            </div>
            <div id=m2Explanation class="explanation">
                Movie 2 Explanation goes here
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>

            <hr class="featurette-divider">

            <!--Third Movie-->
            <div class="row featurette">
                <div class="col-md-7">
                    <h2 id=m3Title class="featurette-heading"></h2>
                    <p id=m3Runtime class="lead"></p>
                    <p id=m3Budget class="lead"></p>
                    <p id=m3Revenue class="lead"></p>
                    <p id=m3AvgVote class="lead"></p>
                    <p id=m3VoteCount class="lead"></p>
                </div>
                <div class="col-md-5">
                    <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 500x500">
                        <image  href="./images/image-placeholder-500x500.jpg"></image>
                    </svg>
                    <button id=m3btn class="btn btn-secondary btn-explanations-odd">See Explanation</button>
                </div>
            </div>
            <div id=m3Explanation class="explanation">
                Movie 3 Explanation goes here
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>

        </br>

            <button class="btn btn-dark btn-lg btn-block">More Movies</button>

        </div>

          <!--Footer-->
          <footer class="text-muted">
              <div class="container">
                  <p class="float-right">
                    <a href="#">Back to top</a>
                  </p>
                <p>Explainable AI Movie Recommender System A</p>
              </div>
              
          </footer>

        <!-- Link to JavaScrip: Popper.js and Bootstrap JS-->
        
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

        <script>

            //Populates the movies
            $(function(){
                $.get("/getCluster4", function(result){

                    //prints JSON into hello p placeholder
                    //$('#hello').html(JSON.stringify(result));
                    
                    //Prints databse query to relevant placeholder
                    //Movie 1 Data
                    $('#m1Title').html(result[0]["title"] + ' - id: ' +result[0]['id']);
                    $('#m1Runtime').html( 'Runtime '+ result[0]["runtime"]+' mins');
                    if(result[0]["budget"] == 0){
                        $('#m1Budget').html('Budget: Unknown');
                    }else{
                        $('#m1Budget').html('Budget: ' + result[1]["budget"]);
                    }
                    if(result[0]["revenue"] == 0){
                        $('#m1Revenue').html('Revenue: Unknown');
                    }else{
                        $('#m1Revenue').html('Revenue: ' + result[0]["revenue"]);
                    }
                    $('#m1AvgVote').html( 'Average Rating: ' + result[0]["vote_average"] + '/10');
                    $('#m1VoteCount').html('Number of Ratings: ' + result[0]["vote_count"]);

                    //Movie 2 Data
                    $('#m2Title').html(result[1]["title"] + ' - id: ' +result[1]['id']);
                    $('#m2Runtime').html( 'Runtime '+ result[1]["runtime"]+' mins');
                    if(result[1]["budget"] == 0){
                        $('#m2Budget').html('Budget: Unknown');
                    }else{
                        $('#m2Budget').html('Budget: ' + result[1]["budget"])
                    }
                    if(result[1]["revenue"] == 0){
                        $('#m2Revenue').html('Revenue: Unknown');
                    }else{
                        $('#m2Revenue').html('Revenue: ' + result[1]["revenue"]);
                    }
                    $('#m2AvgVote').html( 'Average Rating: ' + result[1]["vote_average"] + '/10');
                    $('#m2VoteCount').html('Number of Ratings: ' + result[1]["vote_count"]);

                    //Movie 3 Data
                    $('#m3Title').html(result[2]["title"] + ' - id: ' +result[2]['id']);
                    $('#m3Runtime').html( 'Runtime '+ result[2]["runtime"]+' mins');
                    if(result[2]["budget"] == 0){
                        $('#m3Budget').html('Budget: Unknown');
                    }else{
                        $('#m3Budget').html('Budget: ' + result[2]["budget"])
                    }
                    if(result[2]["revenue"] == 0){
                        $('#m3Revenue').html('Revenue: Unknown');
                    }else{
                        $('#m3Revenue').html('Revenue: ' + result[2]["revenue"]);
                    }
                    $('#m3AvgVote').html( 'Average Rating: ' + result[2]["vote_average"] + '/10');
                    $('#m3VoteCount').html('Number of Ratings: ' + result[2]["vote_count"]);

        


                    //Incase you want to put the results in a table
                    // var obj = result;
                    // for(var i=0; i<obj.length; i++){
                    //     var tr="<tr>";
                    //     var td1="<td>"+obj[i]["id"]+"</td>";
                    //     var td2="<td>"+obj[i]["title"]+"</td></tr>";
                    // }
                    // $("#place-here").append(tr+td1+td2);

                });
            })

            //Buttons to see explanations for movies
            $(function(){
                //Once Movie 1 button is clicked
                $('#m1btn').click(function(){
                    //Shows the m1Explanation div
                    $('#m1Explanation').toggle(500);
                    //Changes the text of the button everytime it is clicked
                    $(this).text($(this).text() == 'See Explanation' ? 'Hide Explanation' : 'See Explanation');
                });

                //Once Movie 2 button is clicked
                $('#m2btn').click(function(){
                    //Shows the m1Explanation div
                    $('#m2Explanation').toggle(500);
                    //Changes the text of the button everytime it is clicked
                    $(this).text($(this).text() == 'See Explanation' ? 'Hide Explanation' : 'See Explanation');
                });

                //Once Movie 3 button is clicked
                $('#m3btn').click(function(){
                    //Shows the m1Explanation div
                    $('#m3Explanation').toggle(500);
                    //Changes the text of the button everytime it is clicked
                    $(this).text($(this).text() == 'See Explanation' ? 'Hide Explanation' : 'See Explanation');
                });
            })

            //track user behaviour
            function letsTrack(id) {
                date = new Date();
                    //sends data to database
                    $.post("/postUserBehaviour", 
                    {
                        userId: 1, 
                        button: id, 
                        timestamp: date.getTime()
                    });
            };
        </script>

    </body>
</html>